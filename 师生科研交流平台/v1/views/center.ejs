<!DOCTYPE html>
<html>

<head>
    <title>个人中心 - 师生科研互动平台</title>
    <%include parts/include.css.html%>
</head>

<body>
    <% include parts/nav.ejs %>
        <div class="container mt20">
            <div class="row">
                <div class="col-sm-9 col-xs-12 pull-right">
                    <div role="tabpanel">
                        <ul class="nav nav-tabs" role="tablist">
                            <li role="presentation" class="active"><a id="news" href="#tab-news" aria-controls="tab-news" role="tab" data-toggle="tab"><i class="fa fa-comments"></i>&nbsp;最新动态</a>
                            </li>
                            <li role="presentation"><a id="project" href="#tab-project" aria-controls="tab-project" role="tab" data-toggle="tab"><i class="fa fa-book"></i>&nbsp;<%=user.type==='同学'?'我的选题':'我的项目'%></a>
                            </li>
                            <li role="presentation"><a id="team" href="#tab-team" aria-controls="tab-team" role="tab" data-toggle="tab"><i class="fa fa-users"></i>&nbsp;我的团队</a>
                            </li>
                            <li role="presentation"><a id="apply" href="#tab-apply" aria-controls="tab-apply" role="tab" data-toggle="tab"><i class="fa fa-edit"></i>&nbsp;<%=user.type==='同学'?'入团申请':'学生申请'%></a>
                            </li>
                            <li role="presentation"><a id="settings" href="#tab-settings" aria-controls="tab-settings" role="tab" data-toggle="tab"><i class="fa fa-cog"></i>&nbsp;设置</a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane fade in active" id="tab-news">
                                <br/>
                                <div id="comments">
                                    <p class="text-muted" id="load-state">加载中</p>
                                </div>
                            </div>
                            <div role="tabpanel" class="tab-pane fade" id="tab-project">
                                <br/>
                                <div id="projects">
                                    <p class="text-muted" id="load-state">加载中</p>
                                </div>
                            </div>
                            <div role="tabpanel" class="tab-pane fade" id="tab-team">
                                <br/>
                                <%if(user.type==='同学' ){%>
                                    <button type="button" class="btn btn-success" data-toggle="modal" data-target="#new-team"><i class="fa fa-plus mr10"></i>创建团队</button>
                                    <%} else if(user.type==='老师' ){%>
                                        <p class="text-info"><i class="fa fa-info-circle"></i>&nbsp;<small>只有学生可作为团队负责人，教师可选择学生创建的团队并加入。</small>
                                        </p>
                                        <%}%>
                                            <hr class="hr-dark" />
                                            <div id="teams">
                                                <p class="text-muted" id="load-state">加载中</p>
                                            </div>
                            </div>
                            <div role="tabpanel" class="tab-pane fade" id="tab-apply">
                                <br/>
                                <%if(user.type==='同学' ){%>
                                    <table class="table table-bordered table-hover" id="table-apply" width="100%">
                                        <thead>
                                            <tr>
                                                <th>学号/工号</th>
                                                <th>姓名</th>
                                                <th>类型</th>
                                                <th>申请加入</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                    </table>
                                    <%} else if (user.type==='老师' ){%>
                                        <table class="table table-bordered table-hover" id="table-apply" width="100%">
                                            <thead>
                                                <tr>
                                                    <th>类型</th>
                                                    <th>姓名</th>
                                                    <th>项目名称</th>
                                                    <th>项目类型</th>
                                                    <th>时间</th>
                                                    <th>操作</th>
                                                </tr>
                                            </thead>
                                        </table>
                                        <%}%>
                            </div>
                            <div role="tabpanel" class="tab-pane fade" id="tab-settings">
                                <br/>
                                <fieldset>
                                    <legend>
                                        <span data-toggle="tooltip" title="点击以展开/收回">
                                            <a data-toggle="collapse" href="#account-setting" aria-expanded="false" aria-controls="account-setting">详细信息</a>
                                        </span>
                                    </legend>
                                    <div id="account-setting" class="collapse">
                                        <%if(user.type==='同学' ){%>
                                            <div class="row">
                                                <form class="col-xs-12 col-sm-6">
                                                    <div class="form-group">
                                                        <label class="control-label" for="input-id">学号</label>
                                                        <input class="form-control" type="text" id="input-id" maxlength="10" required pattern="^[0-9]*$" placeholder="请填写十位以下数字">
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label control-label" for="input-name">姓名</label>
                                                        <input class="form-control form-control" type="text" id="input-name" maxlength="10" required>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label" for="input-sex">性别</label>
                                                        <select class="form-control" type="text" id="input-sex">
                                                            <option>男</option>
                                                            <option>女</option>
                                                            <option>其它</option>
                                                        </select>
                                                    </div>
                                                    <div data-role="selector">
                                                        <div class="form-group">
                                                            <label class="control-label" for="input-college">学院</label>
                                                            <select class="form-control" id="input-college" required data-bind="college"></select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label" for="input-major">专业</label>
                                                            <select class="form-control" id="input-major" required data-bind="major"></select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label" for="input-grade">年级</label>
                                                        <input class="form-control" type="number" id="input-grade" min="1" max="9999">
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label" for="input-type">类型</label>
                                                        <select class="form-control" type="text" id="input-type">
                                                            <option>本科生</option>
                                                            <option>硕士研究生</option>
                                                            <option>博士研究生</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label" for="input-address">地址</label>
                                                        <input class="form-control" type="text" id="input-address" maxlength="20">
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label" for="input-email">邮箱</label>
                                                        <input class="form-control" type="email" id="input-email" maxlength="50">
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label" for="input-phone">电话</label>
                                                        <input class="form-control" type="tel" id="input-phone" maxlength="20">
                                                    </div>
                                                    <button type="submit" class="col-xs-12 btn btn-primary" id="input-submit">保存</button>
                                                </form>
                                            </div>
                                            <%} else if(user.type==='老师' ){%>
                                                <div class="row">
                                                    <form class="col-xs-12 col-sm-6">
                                                        <div class="form-group">
                                                            <label class="ontrol-label" for="input-id">工号</label>
                                                            <input class="form-control" type="text" id="input-id" maxlength="10" required pattern="^[0-9]*$" placeholder="请填写十位以下数字">
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label control-label" for="input-name">姓名</label>
                                                            <input class="form-control form-control" type="text" id="input-name" maxlength="10" required>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label" for="input-sex">性别</label>
                                                            <select class="form-control" type="text" id="input-sex">
                                                                <option>男</option>
                                                                <option>女</option>
                                                                <option>其它</option>
                                                            </select>
                                                        </div>
                                                        <div class="form-group" data-role="selector">
                                                            <label class="control-label" for="input-department">部门</label>
                                                            <select class="form-control" id="input-department" required data-bind="college"></select>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label" for="input-title">职称</label>
                                                            <input class="form-control" type="text" id="input-title" maxlength="10" />
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label" for="input-email">邮箱</label>
                                                            <input class="form-control" type="email" id="input-email" maxlength="50">
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="control-label" for="input-phone">电话</label>
                                                            <input class="form-control" type="tel" id="input-phone" maxlength="20">
                                                        </div>
                                                        <button type="submit" class="col-xs-12 btn btn-primary " id="input-submit">保存</button>
                                                    </form>
                                                </div>
                                                <%}%>
                                                    <br/>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <legend>
                                        <span data-toggle="tooltip" title="点击以展开/收回">
                                            <a data-toggle="collapse" href="#head-setting" aria-expanded="false" aria-controls="head-setting">更换头像</a>
                                        </span>
                                    </legend>
                                    <div id="head-setting" class="collapse">
                                        <div class="row">
                                            <form class="col-xs-12 col-sm-6">
                                                <div class="form-group">
                                                    <input class="form-control" type="file" id="input-head">
                                                </div>
                                                <div class="form-group">
                                                    <img id="head-setting-preview-big" class="head head-lg" />
                                                    <img id="head-setting-preview-small" class="head head-sm" style="vertical-align: bottom" />
                                                </div>
                                                <div class="form-group">
                                                    <button type="button" class="col-xs-12 btn btn-primary" id="submit-head">保存</button>
                                                </div>
                                            </form>
                                        </div>
                                        <br/>
                                    </div>
                                </fieldset>
                                <fieldset>
                                    <legend>
                                        <span data-toggle="tooltip" title="点击以展开/收回">
                                            <a data-toggle="collapse" href="#password-setting" aria-expanded="false" aria-controls="password-setting">更改密码</a>
                                        </span>
                                    </legend>
                                    <div id="password-setting" class="collapse">
                                        <div class="row">
                                            <form class="col-xs-12 col-sm-6">
                                                <div class="form-group">
                                                    <label for="input-orign-password">原密码</label>
                                                    <input type="password" class="form-control" id="input-orign-password">
                                                </div>
                                                <div class="form-group">
                                                    <label for="input-new-password">新密码</label>
                                                    <input type="password" class="form-control" id="input-new-password">
                                                </div>
                                                <div class="form-group">
                                                    <label for="input-confirm-password">确认</label>
                                                    <input type="password" class="form-control" id="input-confirm-password">
                                                </div>
                                                <button type="submit" class="col-xs-12 btn btn-primary">保存</button>
                                            </form>
                                        </div>
                                        <br/>
                                    </div>
                                </fieldset>
                            </div>
                        </div>

                    </div>

                </div>
                <div class="col-sm-3 col-xs-12">
                    <div class="aside aside-left">

                        <img src="<%=user.img%>" class="head head-lg" />
                        <h3><%=user.name%><br/><small><%=user.id%></small></h3>

                        <hr/>
                        <%if(user.type==='同学' ){%>
                            <p><i class="fa fa-institution"></i>
                                <%=user.studentAttr?user.studentAttr.college: ''%>
                            </p>
                            <p><i class="fa fa-tag"></i>
                                <%=user.studentAttr?user.studentAttr.major: ''%>
                            </p>
                            <p><i class="fa fa-clock-o"></i>
                                <%=user.studentAttr?user.studentAttr.grade+ '级': ''%>
                            </p>
                            <p><i class="fa fa-graduation-cap"></i>
                                <%=user.studentAttr?user.studentAttr.studentType: ''%>
                            </p>
                            <p><i class="fa fa-envelope"></i>
                                <a href="mailto:<%=user.email%>">
                                    <%=user.email%>
                                </a>
                            </p>
                            <%} else if (user.type==='老师' ){%>
                                <p><i class="fa fa-institution"></i>
                                    <%=user.teacherAttr?user.teacherAttr.department: ''%>
                                </p>
                                <p><i class="fa fa-tag"></i>
                                    <%=user.teacherAttr?user.teacherAttr.title: ''%>
                                </p>
                                <%}%>
                                    <hr/>
                                    <table class="table table-condensed table-none-bordered text-center">
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <h2 id="oe-num">-</h2>
                                                </td>
                                                <td>
                                                    <h2 id="cc-num">-</h2>
                                                </td>
                                                <td>
                                                    <h2 id="ip-num">-</h2>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <h6><small>开放实验</small></h6>
                                                </td>
                                                <td>
                                                    <h6><small>挑战杯</small></h6>
                                                </td>
                                                <td>
                                                    <h6><small>创新项目</small></h6>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                    </div>
                </div>
            </div>
        </div>
        <%if(user.type==='老师' ){%>

            <%} else if(user.type==='同学' ){%>
                <div class="modal fade" id="new-team" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                                </button>
                                <h4 class="modal-title">创建团队</h4>
                            </div>
                            <form>
                                <div class="modal-body">
                                    <div class="form-group">
                                        <label for="input-orign-password">负责人</label>
                                        <input type="text" class="form-control" id="input-leader" required value="<%=user.name+' ('+user.id+')'%>" readonly>
                                    </div>
                                    <div class="form-group">
                                        <label for="input-orign-password">名称</label>
                                        <input type="text" class="form-control" id="input-name" required maxlength="20">
                                    </div>
                                    <div class="form-group">
                                        <label for="input-orign-password">描述</label>
                                        <textarea class="form-control" id="input-desc" required maxlength="500" rows="3"></textarea>
                                    </div>

                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                                    <button type="submit" class="btn btn-primary" id="submit">保存</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <%}%>
                    <% include parts/include.js.html %>
                        <script type="text/javascript" src="/js/center.js"></script>
</body>

</html>